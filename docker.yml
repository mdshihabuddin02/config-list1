- name: Install Jenkins
  package:
    name: "{{ docker_old_package }}"
    state: absent

- name: Update apt cache
  apt:
    update_cache: yes

- name: Install Jenkins
  package:
    name: "{{ docker_old_package }}"
    state: absent

- name: Import Docker GPG key
  shell: curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add â€“

- name: Add Docker repository
  apt_repository:
    repo: "deb [arch=amd64] https://download.docker.com/linux/ubuntu focal stable"
    state: present
    filename: docker

- name: Update apt cache
  apt:
    update_cache: yes

- name: Check Docker CE installation source
  shell: apt-cache policy docker-ce
  register: docker_ce_policy

- debug:
    var: docker_ce_policy.stdout_lines

- name: Install OpenJDK 11
  apt:
    name: openjdk-11-jdk
    state: present

- name: Check Docker service status
  systemd:
    name: docker
  register: docker_service_status

- debug:
    var: docker_service_status.stdout_lines